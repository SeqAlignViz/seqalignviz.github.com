<!DOCTYPE html>
<html>
	<head>
	  <meta charset="utf-8" />
		<title>Seq Logo Demo</title>
		
		<script type="text/javascript" src="http://d3js.org/d3.v2.js"></script>
		<script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.8.2/jquery.js"></script>
		<script type="text/javascript" src="lib/seqLogo/base64.js"></script>
		<script type="text/javascript" src="http://yui.yahooapis.com/2.8.2r1/build/yahoo-dom-event/yahoo-dom-event.js"></script> 
		<script type="text/javascript" src="http://yui.yahooapis.com/2.8.2r1/build/element/element-min.js"></script> 
		<script type="text/javascript" src="http://yui.yahooapis.com/2.8.2r1/build/connection/connection-min.js"></script>
		<script type="text/javascript" src="lib/seqLogo/canvas2image.js"></script>
		<script type="text/javascript" src="lib/seqLogo/canvasSeqLogo.js"></script>
		<script type="text/javascript" src="js/alignment.js"></script>
		<script type="text/javascript" src="js/pwm.js"></script>
		<script src="lib/tipsy/jquery.tipsy.js"></script>
		<link href="lib/tipsy/tipsy.css" rel="stylesheet" type="text/css" />
		<link href="lib/bootstrap/css/bootstrap.css" rel="stylesheet" type="text/css" />
		<style type="text/css">
			text {
				font-size: 8px;
				text-align: "center";
				vertical-align: "middle";
			}
			rect.extent {
			  stroke: #fff;
			  fill-opacity: .25;
			  shape-rendering: crispEdges;
			}
			.brush .extent {
			  stroke: #000;
			  stroke-width: 2;
			  fill-opacity: .1875;
			  shape-rendering: crispEdges;
			}
			.zoomline {
			  stroke: #000;
			  stroke-width: 2;
			}
		</style>
	</head>
	<body>
		<div class="container">
			<div class="row">
				<div class="span4">
					<img src="img/Zoom-In-icon.png" style="height: 50px"/>
				</div>
				<div class="span8 pagination-right">
					<h1>Zoomer!</h1>
				</div>
			</div>
			<div class="row">
				<div class="span12">
				<hr/>
				</div>
			</div>
			<div class="row">
				<div class="span3">
					<h2>Welcome!</h2>
					<p>Lorem ipsum dolor sit amet, consectetuer adipiscing elit. Integer pretium dui sit amet felis. Integer sit amet diam. Phasellus ultrices viverra velit. Nam mattis, arcu ut bibendum commodo, magna nisi tincidunt tortor, quis accumsan augue ipsum id lorem.</p>
					<a href="#" class="btn">Color by Nucleotide</a>
					<a href="#" class="btn">Color by % ID</a>
				</div>
			<div class="span9">
				<div id="seqLogo"></div>
				<div id="aln_zoom"></div>
				<div id="aln_full"></div>
			</div>
		</div>
		<script type="text/javascript">
		// SVG sizing
		var margin = {top: 10, bottom: 10, left: 0, right: 0}
		dWidth = 700;
		dHeight = 250;
		var width = dWidth - margin.left - margin.right
		var height = dHeight - margin.top - margin.bottom

		// draw seqlogo
		$("#seqLogo")
			.css("width", width+"px")
			.css("height", "40px")
			.css("margin-top", margin.top+"px")
			.css("margin-left", margin.left+"px")

		$("#aln_zoom")
			.css("width", dWidth+"px")
			.css("height", dHeight+"px")

	
		$("#aln_full")
			.css("width", dWidth+"px")
			.css("height", dHeight+"px")
		
		// draw full
		// Get alignment data
		var stringData = $.ajax({
							url: "dat/test.aln",
							async: false
						 }).responseText;
		var alnArray = [];
		var stringArray = stringData.replace(/^\s+|\s+$/g,"").split("\n");
		for(var i = 0; i < stringArray.length; i++) {
			for(var j = 0; j < stringArray[i].length; j++) {
				alnArray.push({val: stringArray[i][j], row: i, col: j});
			}
		}
		var rows = stringArray.length;
		var cols = stringArray[0].length;
		drawAlignment(alnArray, rows, cols, d3.select("#aln_full"), dWidth, dHeight, false, true);
		</script>
	</body>
</html>
